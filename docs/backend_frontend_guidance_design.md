# 메시지 생성 책임 분리 설계 문서

## (Backend vs Frontend Guidance Message Rendering Design)

---

## 1. 문서 목적

본 문서는 위험군 예측 리포트 생성 과정에서 발생하는 다음 설계 이슈를 정리하기 위해 작성되었다.

> “점수 역산 안내 메시지와 같은 문장을 백엔드에서 생성할 것인가,  
> 아니면 수치만 반환하고 프론트엔드에서 문장을 생성할 것인가?”

본 문서는 두 방식의 구조적 차이, 장단점, 업계 활용 사례, 본 프로젝트 적용 적합성을 기술한다.

---

## 2. 현재 구현 방식 (Baseline)

현재 시스템은 다음과 같이 동작한다.

CSV → 전처리 → 모델 예측 → 점수 역산 → 안내 문장 생성 → 리포트 반환

예시 출력:

기말고사에서 최소 37.2점(/100) 이상 필요합니다.

즉,

- 계산: 백엔드
- 문장 생성: 백엔드
- 표현: 백엔드

---

## 3. 대안 설계안: 수치만 반환

대안 구조:

CSV → 전처리 → 모델 예측 → 점수 역산 → 수치 반환 → 프론트 문장 생성

예시 반환(JSON):

{
"required_final_score": 37.2,
"final_max_score": 100
}

프론트에서 렌더링:

기말고사에서 최소 37.2점(/100) 이상 필요합니다.

---

## 4. 설계 비교

### 4.1 Backend 문장 생성 방식

장점

1. 정책 문구 일관성 유지
2. CSV 리포트 출력과 동일 로직 사용 가능
3. 프론트 구현 부담 감소
4. 오프라인 배치 처리와 호환

단점

1. 다국어 지원 어려움
2. UI 표현 변경 시 백 수정 필요
3. 문자열 포맷 유연성 낮음

---

### 4.2 Frontend 문장 생성 방식

장점

1. UI/UX 표현 자유도 높음
2. 다국어(i18n) 대응 용이
3. 문구 길이/스타일 조정 가능
4. API는 데이터 중심 구조 유지

단점

1. 정책 문구 불일치 위험
2. CSV 리포트에는 재사용 어려움
3. 프론트가 계산 맥락 이해 필요

---

## 5. 업계 표준 설계 패턴

대부분의 서비스는 아래 구조를 채택한다.

### Code + Params 구조

예시:

{
"guidance": {
"code": "NEED_MIN_FINAL_SCORE",
"params": {
"min_score": 37.2,
"max_score": 100
}
}
}

구조 해석:

- code → 문장 템플릿 키
- params → 템플릿 삽입 변수

---

## 6. 본 프로젝트 적용 적합성

프로젝트 특성:

- 교사용 CSV 리포트 필요
- 오프라인 실행 스크립트 존재
- 정책 문구 고정 필요성 높음

따라서 현재 단계에서는 백엔드 문장 생성 유지가 합리적이며,  
서비스 고도화 단계에서 Code + Params 구조로 확장하는 것이 이상적이다.

---

## 7. 결론

| 항목             | 평가        |
| ---------------- | ----------- |
| 백에서 문장 생성 | 비효율 아님 |
| 프론트 문장 생성 | 표준 설계   |
| 혼합 구조        | 최적 설계   |

---
